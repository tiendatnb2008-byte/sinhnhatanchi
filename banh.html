<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bánh Sinh Nhật Dễ Thương</title>
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(to bottom, #ffe6f0, #ffd1dc);
            font-family: 'Bubblegum Sans', cursive;
            overflow: hidden;
            position: relative;
            padding-bottom: 0;
        }
        
        .cake-container {
            position: absolute;
            bottom: 80px;
            text-align: center;
            max-width: 90vw;
            transition: opacity 1s ease;
        }
        
        .cake {
            position: relative;
            width: 300px;
            height: 250px;
            margin: 0 auto;
        }
        
        .layer {
            position: absolute;
            border-radius: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: clip-path 0.5s ease, transform 1s ease;
        }
        
        .layer.cut {
            clip-path: polygon(0 0, 50% 0, 50% 100%, 0 100%);
            transform: translateX(-50px);
        }
        
        .layer.cut-right {
            clip-path: polygon(50% 0, 100% 0, 100% 100%, 50% 100%);
            transform: translateX(50px);
        }
        
        .layer-1 {
            width: 100%;
            height: 100px;
            bottom: 0;
            background: #ffe4c4;
            border-bottom: 8px solid #ff4040;
            border-top: 8px solid #ff4040;
        }
        
        .layer-2 {
            width: 70%;
            height: 80px;
            bottom: 100px;
            left: 15%;
            background: #ffe4c4;
            border-bottom: 6px solid #ff4040;
            border-top: 6px solid #ff4040;
        }
        
        .layer-3 {
            width: 40%;
            height: 60px;
            bottom: 180px;
            left: 30%;
            background: #ffe4c4;
            border-bottom: 4px solid #ff4040;
            border-top: 4px solid #ff4040;
        }
        
        .frosting {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            background: linear-gradient(to right, #ff4040, #ff6347);
            opacity: 0.8;
            border-radius: 20px;
            clip-path: polygon( 0 0, 10% 20%, 20% 0, 30% 20%, 40% 0, 50% 20%, 60% 0, 70% 20%, 80% 0, 90% 20%, 100% 0, 100% 100%, 90% 80%, 80% 100%, 70% 80%, 60% 100%, 50% 80%, 40% 100%, 30% 80%, 20% 100%, 10% 80%, 0 100%);
        }
        
        .rainbow-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: radial-gradient(circle, rgba(255, 99, 71, 0.3) 10%, rgba(255, 215, 0, 0.3) 30%, rgba(50, 205, 50, 0.3) 50%, transparent 70%);
            opacity: 0.5;
            animation: rainbowGlow 5s ease-in-out infinite;
            pointer-events: none;
        }
        
        @keyframes rainbowGlow {
            0% {
                filter: hue-rotate(0deg);
            }
            100% {
                filter: hue-rotate(360deg);
            }
        }
        
        .candle {
            position: absolute;
            width: 8px;
            height: 30px;
            top: -40px;
            border-radius: 5px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            z-index: 10;
        }
        
        .candle:hover {
            transform: scale(1.2);
        }
        
        .candle-1 {
            left: 35%;
            background: #ff4040;
        }
        
        .candle-2 {
            left: 45%;
            background: #ffd700;
        }
        
        .candle-3 {
            left: 55%;
            background: #4682b4;
        }
        
        .candle-4 {
            left: 65%;
            background: #ff99cc;
        }
        
        .candle-5 {
            left: 50%;
            background: #32cd32;
        }
        
        .candle-6 {
            left: 40%;
            background: #ff8c00;
        }
        
        .wick {
            position: absolute;
            width: 2px;
            height: 6px;
            background: #333;
            top: -6px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .flame {
            position: absolute;
            width: 8px;
            height: 15px;
            background: radial-gradient(circle, #fff 10%, #ffd700 30%, #ff4500 60%, transparent);
            top: -18px;
            left: 50%;
            transform: translateX(-50%) rotate(0deg);
            border-radius: 50% 50% 0 0;
            animation: flameDance 0.5s ease-in-out infinite alternate;
            filter: blur(2px);
        }
        
        .smoke {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(200, 200, 200, 0.5);
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50%;
            animation: smokePuff 2s ease-in-out infinite;
        }
        
        @keyframes flameDance {
            0% {
                transform: translateX(-50%) scale(1) skew(-5deg, 0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateX(-50%) scale(1.2) skew(5deg, 0deg);
                opacity: 1;
            }
        }
        
        @keyframes smokePuff {
            0% {
                transform: translateX(-50%) translateY(0) scale(0.5);
                opacity: 0.5;
            }
            100% {
                transform: translateX(-50%) translateY(-10px) scale(1.5);
                opacity: 0;
            }
        }
        
        .glow {
            position: absolute;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.5) 10%, transparent 70%);
            top: -22px;
            left: 50%;
            transform: translateX(-50%);
            animation: glowPulse 1.5s infinite alternate;
            pointer-events: none;
        }
        
        @keyframes glowPulse {
            0% {
                transform: translateX(-50%) scale(1);
                opacity: 0.4;
            }
            100% {
                transform: translateX(-50%) scale(1.3);
                opacity: 0.6;
            }
        }
        
        .plate {
            position: absolute;
            width: 320px;
            height: 20px;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            background: #fff;
            border: 4px solid #ff4040;
            border-radius: 50%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .sparkle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ffd700;
            animation: sparkle 4s linear infinite;
            pointer-events: none;
        }
        
        .sparkle.star {
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }
        
        .sparkle.heart {
            clip-path: polygon(50% 0%, 100% 40%, 80% 100%, 50% 80%, 20% 100%, 0% 40%);
        }
        
        .sparkle.pink {
            background: #ff99cc;
        }
        
        .sparkle.blue {
            background: #66ccff;
        }
        
        @keyframes sparkle {
            0% {
                transform: translateY(-60vh) scale(0.4) rotate(0deg);
                opacity: 1;
            }
            50% {
                opacity: 0.9;
            }
            100% {
                transform: translateY(60vh) scale(1.5) rotate(720deg);
                opacity: 0;
            }
        }
        
        .sparkle-burst {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: burst 3s linear infinite;
            pointer-events: none;
        }
        
        .sparkle-burst.pink {
            background: #ff99cc;
        }
        
        .sparkle-burst.blue {
            background: #66ccff;
        }
        
        @keyframes burst {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 1;
            }
            50% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0.7;
            }
            100% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
        }
        
        .confetti {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ff99cc;
            animation: confettiFall 5s linear infinite;
        }
        
        .confetti.blue {
            background: #66ccff;
        }
        
        .confetti.yellow {
            background: #ffd700;
        }
        
        @keyframes confettiFall {
            0% {
                transform: translateY(-60vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(60vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        .firework {
            position: absolute;
            background: #ffd700;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.8), 0 0 10px rgba(255, 215, 0, 0.5);
            animation: fireworkBurst 3s ease-out forwards;
            pointer-events: none;
        }
        
        .firework.strip {
            width: 10px;
            height: 20px;
            border-radius: 2px;
        }
        
        .firework.star {
            width: 12px;
            height: 12px;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
        }
        
        .firework.red {
            background: #cc3333;
        }
        
        .firework.blue {
            background: #2f5a7a;
        }
        
        .firework.green {
            background: #228b22;
        }
        
        .firework.purple {
            background: #a64ca6;
        }
        
        .firework.pink {
            background: #cc6699;
        }
        
        @keyframes fireworkBurst {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg) scale(1);
                opacity: 1;
            }
            50% {
                transform: translateY(-60vh) translateX(calc(var(--spread-x, 0) * 1vw)) rotate(360deg) scale(1.2);
                opacity: 0.8;
                box-shadow: 0 0 10px rgba(255, 255, 255, 1), 0 0 20px rgba(255, 215, 0, 0.8);
            }
            100% {
                transform: translateY(40vh) translateX(calc(var(--spread-x, 0) * 2vw)) rotate(720deg) scale(0.5);
                opacity: 0;
                box-shadow: 0 0 5px rgba(255, 255, 255, 0.3), 0 0 10px rgba(255, 215, 0, 0.2);
            }
        }
        
        .birthday-message {
            position: fixed;
            top: 40%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            color: #ff4040;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 20;
            animation: textGlow 2s ease-in-out infinite alternate, wave 3s ease-in-out infinite;
        }
        
        .birthday-message.show {
            opacity: 1;
        }
        
        @keyframes textGlow {
            0% {
                text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3), 0 0 10px rgba(255, 64, 64, 0.5);
            }
            100% {
                text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 64, 64, 1);
            }
        }
        
        @keyframes wave {
            0% {
                transform: translate(-50%, -50%) translateY(0);
            }
            50% {
                transform: translate(-50%, -50%) translateY(-10px);
            }
            100% {
                transform: translate(-50%, -50%) translateY(0);
            }
        }
        
        .text-sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #ffd700;
            border-radius: 50%;
            animation: textSparkle 2s linear infinite;
            pointer-events: none;
            z-index: 21;
        }
        
        @keyframes textSparkle {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            50% {
                transform: scale(1.5);
                opacity: 0.7;
            }
            100% {
                transform: scale(0);
                opacity: 0;
            }
        }
        
        .knife {
            position: absolute;
            width: 60px;
            height: 20px;
            background: linear-gradient(to right, #c0c0c0, #a9a9a9);
            border: 2px solid #808080;
            border-radius: 5px;
            top: 50%;
            right: -100px;
            z-index: 30;
            animation: moveKnife 2s ease forwards, cutCake 0.5s ease 2s forwards;
        }
        
        .knife::before {
            content: '';
            position: absolute;
            width: 20px;
            height: 10px;
            background: #333;
            border-radius: 3px;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
        }
        
        @keyframes moveKnife {
            0% {
                right: -100px;
            }
            100% {
                right: calc(50vw - 150px);
            }
        }
        
        @keyframes cutCake {
            0% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(200px);
            }
            100% {
                transform: translateY(0);
            }
        }
        
        .cut-sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            animation: cutSparkle 1s ease forwards;
            pointer-events: none;
        }
        
        .cut-sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            animation: cutSparkle 1s ease forwards;
            pointer-events: none;
        }
        
        @keyframes cutSparkle {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        .album {
            position: absolute;
            bottom: 150px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 150px;
            background: #fff;
            border: 5px solid #ff66a3;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transition: opacity 1s ease;
            z-index: 25;
        }
        
        .album.show {
            opacity: 1;
        }
        
        .album-photo {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 0.5s ease;
            position: absolute;
        }
        
        .album-photo.active {
            opacity: 1;
        }
          .album-photo:nth-child(1) {
            background-image: url('hpbd/anh2.jpg');
        }
        
        .album-photo:nth-child(2) {
            background-image: url('hpbd/anh3.jpg');
        }
        
        .album-photo:nth-child(3) {
            background-image: url('hpbd/anh4.jpg');
        }
        
        .album-photo:nth-child(4) {
            background-image: url('hpbd/anh5.jpg');
        }
        
        .album-photo:nth-child(5) {
            background-image: url('hpbd/anh6.jpg');
        }
        
        .album-photo:nth-child(6) {
            background-image: url('hpbd/anh7.jpg');
        }
        
        .album-photo:nth-child(7) {
            background-image: url('hpbd/anh8.jpg');
        }
        
        .album-photo:nth-child(8) {
            background-image: url('hpbd/anh9.jpg');
        }
        
        .album-photo:nth-child(9) {
            background-image: url('hpbd/anh10.jpg');
        }
        
        .album-photo:nth-child(10) {
            background-image: url('hpbd/anh11.jpg');
        }
        .album-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            padding: 5px 10px;
            background: #ff66a3;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Bubblegum Sans', cursive;
            font-size: 1em;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }
        
        .album-button.prev {
            left: -60px;
        }
        
        .album-button.next {
            right: -60px;
        }
        
        .album-button:hover {
            background: #ff4081;
        }
        
        .balloon-container {
            position: absolute;
            bottom: -300px;
            width: 150px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            z-index: 10;
            animation: flyUp 6s linear forwards, swayHorizontal 4s ease-in-out infinite alternate;
        }
        
        .balloon-container::after {
            content: '';
            position: absolute;
            width: 2px;
            height: 180px;
            background: transparent;
            border-left: 2px dashed #ff4040;
            bottom: -180px;
            left: 50%;
            transform: translateX(-50%);
            animation: swayString 4s ease-in-out infinite alternate;
            z-index: 5;
        }
        
        @keyframes flyUp {
            0% {
                bottom: -300px;
            }
            100% {
                bottom: calc(100vh + 300px);
            }
        }
        
        @keyframes swayHorizontal {
            0% {
                transform: translateX(-20px);
            }
            100% {
                transform: translateX(20px);
            }
        }
        
        .balloon {
            position: absolute;
            width: 50px;
            height: 70px;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.6) 20%, #cc3333 60%);
            clip-path: polygon( 50% 0%, 80% 10%, 100% 40%, 90% 80%, 70% 95%, 50% 100%, 30% 95%, 10% 80%, 0% 40%, 20% 10%);
            opacity: 1;
            animation: sway 3s ease-in-out infinite alternate, balloonFloat 2s ease-in-out infinite alternate;
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .balloon::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            animation: balloonSparkle 2s linear infinite;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            pointer-events: none;
        }
        
        @keyframes balloonSparkle {
            0% {
                transform: translateX(-50%) scale(0);
                opacity: 1;
            }
            50% {
                transform: translateX(-50%) scale(1.5);
                opacity: 0.7;
            }
            100% {
                transform: translateX(-50%) scale(0);
                opacity: 0;
            }
        }
        
        .balloon::before {
            content: '';
            position: absolute;
            width: 2px;
            height: var(--string-length, 120px);
            background: transparent;
            border-left: 2px dashed #ff4040;
            bottom: calc(-1 * var(--string-length, 120px));
            left: 50%;
            transform: translateX(-50%);
            animation: swayString 3s ease-in-out infinite alternate;
        }
        
        @keyframes sway {
            0% {
                transform: rotate(calc(-1 * var(--sway-angle, 5deg)));
            }
            100% {
                transform: rotate(var(--sway-angle, 5deg));
            }
        }
        
        @keyframes balloonFloat {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes swayString {
            0% {
                transform: translateX(-50%) skew(calc(-1 * var(--sway-angle, 5deg)));
            }
            100% {
                transform: translateX(-50%) skew(var(--sway-angle, 5deg));
            }
        }
        
        .balloon-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 20px;
            background: #ff66a3;
            color: #fff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-family: 'Bubblegum Sans', cursive;
            font-size: 1.2em;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: opacity 0.5s ease, transform 0.2s ease;
            z-index: 30;
        }
        
        .balloon-button:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        .balloon-button.hide {
            opacity: 0;
            pointer-events: none;
        }
        
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        @media (max-width: 600px) {
            .cake {
                width: 200px;
                height: 180px;
            }
            .layer-1 {
                height: 70px;
            }
            .layer-2 {
                height: 60px;
                bottom: 70px;
            }
            .layer-3 {
                height: 50px;
                bottom: 130px;
            }
            .plate {
                width: 220px;
            }
            .candle {
                top: -30px;
                height: 25px;
            }
            .balloon-button {
                font-size: 1em;
                padding: 8px 16px;
            }
            .balloon-container {
                width: 100px;
                height: 150px;
            }
            .balloon {
                width: 35px;
                height: 50px;
            }
            .balloon::before {
                height: 80px;
            }
            .balloon-container::after {
                height: 100px;
            }
            .birthday-message {
                font-size: 2em;
            }
            .firework.strip {
                width: 8px;
                height: 16px;
            }
            .firework.star {
                width: 10px;
                height: 10px;
            }
            .knife {
                width: 40px;
                height: 15px;
            }
            .knife::before {
                width: 15px;
                height: 8px;
            }
            .album {
                width: 150px;
                height: 100px;
                bottom: 120px;
            }
            .album-button {
                font-size: 0.8em;
                padding: 3px 8px;
            }
            .album-button.prev {
                left: -50px;
            }
            .album-button.next {
                right: -50px;
            }
            .cake-container {
                bottom: 60px;
            }
        }
    </style>
</head>

<body>
    <div class="cake-container">
        <div class="cake">
            <div class="plate"></div>
            <div class="layer layer-1">
                <div class="frosting"></div>
                <div class="rainbow-glow"></div>
            </div>
            <div class="layer layer-2">
                <div class="frosting"></div>
                <div class="rainbow-glow"></div>
            </div>
            <div class="layer layer-3">
                <div class="frosting"></div>
                <div class="rainbow-glow"></div>
                <div class="candle candle-1">
                    <div class="wick"></div>
                    <div class="flame"></div>
                    <div class="smoke"></div>
                    <div class="glow"></div>
                </div>
                <div class="candle candle-2">
                    <div class="wick"></div>
                    <div class="flame"></div>
                    <div class="smoke"></div>
                    <div class="glow"></div>
                </div>
                <div class="candle candle-3">
                    <div class="wick"></div>
                    <div class="flame"></div>
                    <div class="smoke"></div>
                    <div class="glow"></div>
                </div>
                <div class="candle candle-4">
                    <div class="wick"></div>
                    <div class="flame"></div>
                    <div class="smoke"></div>
                    <div class="glow"></div>
                </div>
                <div class="candle candle-5">
                    <div class="wick"></div>
                    <div class="flame"></div>
                    <div class="smoke"></div>
                    <div class="glow"></div>
                </div>
                <div class="candle candle-6">
                    <div class="wick"></div>
                    <div class="flame"></div>
                    <div class="smoke"></div>
                    <div class="glow"></div>
                </div>
            </div>
        </div>
    </div>
    <button class="balloon-button" onclick="releaseBalloons()">Thả Bóng Bay</button>
    <div class="birthday-message" id="birthdayMessage">Chúc Mừng Sinh Nhật</div>
    <div class="album" id="album">
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <div class="album-photo"></div>
        <button class="album-button prev" onclick="changePhoto(-1)">Trước</button>
        <button class="album-button next" onclick="changePhoto(1)">Sau</button>
    </div>
    <audio id="backgroundMusic" autoplay loop>
        <source src="hpbd.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const music = document.getElementById('backgroundMusic');
            music.volume = 1;
            music.play().catch(error => {
                console.error('Auto-play failed:', error);
                document.querySelector('.balloon-button').addEventListener('click', () => {
                    music.play().catch(err => console.error('Error playing music on click:', err));
                });
            });
        });

        window.addEventListener('beforeunload', () => {
            const music = document.getElementById('backgroundMusic');
            if (music) {
                music.pause();
                music.currentTime = 0;
            }
        });

        const shapes = ['star', 'heart'];
        const colors = ['pink', 'blue', 'yellow'];
        for (let i = 0; i < 30; i++) {
            let sparkle = document.createElement('div');
            sparkle.className = `sparkle ${shapes[Math.floor(Math.random() * 2)]} ${colors[Math.floor(Math.random() * 3)]}`;
            sparkle.style.left = Math.random() * 100 + 'vw';
            sparkle.style.animationDelay = Math.random() * 4 + 's';
            sparkle.style.width = Math.random() * 8 + 6 + 'px';
            sparkle.style.height = Math.random() * 8 + 6 + 'px';
            document.body.appendChild(sparkle);
        }

        for (let i = 0; i < 5; i++) {
            let burst = document.createElement('div');
            burst.className = `sparkle-burst ${colors[Math.floor(Math.random() * 3)]}`;
            burst.style.animationDelay = Math.random() * 3 + 's';
            document.querySelector('.cake').appendChild(burst);
        }

        for (let i = 0; i < 20; i++) {
            let confetti = document.createElement('div');
            confetti.className = `confetti ${colors[Math.floor(Math.random() * 3)]}`;
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.animationDelay = Math.random() * 5 + 's';
            document.body.appendChild(confetti);
        }

        function createTextSparkles() {
            const message = document.getElementById('birthdayMessage');
            for (let i = 0; i < 20; i++) {
                let sparkle = document.createElement('div');
                sparkle.className = 'text-sparkle';
                sparkle.style.left = `calc(50% + ${(Math.random() * 200 - 100)}px)`;
                sparkle.style.top = `calc(40% + ${(Math.random() * 60 - 30)}px)`;
                sparkle.style.animationDelay = Math.random() * 2 + 's';
                document.body.appendChild(sparkle);
            }
        }

        function releaseBalloons() {
            console.log('releaseBalloons triggered');
            try {
                const button = document.querySelector('.balloon-button');
                if (!button) throw new Error('Balloon button not found');
                button.classList.add('hide');

                function createBalloonCluster() {
                    for (let i = 0; i < 5; i++) {
                        let balloonContainer = document.createElement('div');
                        balloonContainer.className = 'balloon-container';
                        balloonContainer.style.left = Math.random() * 80 + 10 + 'vw';
                        balloonContainer.style.animationDelay = Math.random() * 3 + 's';

                        for (let j = 0; j < 15; j++) {
                            let balloon = document.createElement('div');
                            balloon.className = 'balloon';
                            balloon.style.left = Math.random() * 120 + 15 + 'px';
                            balloon.style.top = Math.random() * 150 + 'px';
                            const balloonColors = ['#cc3333', '#2f5a7a', '#cc9900', '#228b22', '#a64ca6', '#cc6699'];
                            balloon.style.background = `radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.6) 20%, ${balloonColors[Math.floor(Math.random() * balloonColors.length)]} 60%)`;
                            balloon.style.setProperty('--string-length', Math.random() * 40 + 100 + 'px');
                            balloon.style.setProperty('--sway-angle', Math.random() * 10 - 5 + 'deg');
                            balloon.style.setProperty('--sway-duration', Math.random() * 2 + 2 + 's');
                            balloon.style.animation = `sway ${Math.random() * 2 + 2}s ease-in-out infinite alternate, balloonFloat ${Math.random() * 1 + 1}s ease-in-out infinite alternate`;
                            balloonContainer.appendChild(balloon);
                        }

                        document.body.appendChild(balloonContainer);
                    }
                }

                function createFireworks() {
                    const fireworkColors = ['red', 'blue', 'green', 'purple', 'pink'];
                    const fireworkShapes = ['strip', 'star'];
                    for (let i = 0; i < 100; i++) {
                        let firework = document.createElement('div');
                        const shape = fireworkShapes[Math.floor(Math.random() * 2)];
                        firework.className = `firework ${shape} ${fireworkColors[Math.floor(Math.random() * 5)]}`;
                        firework.style.left = Math.random() * 100 + 'vw';
                        firework.style.bottom = '0';
                        firework.style.setProperty('--spread-x', (Math.random() * 60 - 30));
                        firework.style.animationDelay = Math.random() * 0.5 + 's';
                        const size = Math.random() * 5 + 5;
                        if (shape === 'strip') {
                            firework.style.width = size + 'px';
                            firework.style.height = size * 2 + 'px';
                        } else {
                            firework.style.width = size + 2 + 'px';
                            firework.style.height = size + 2 + 'px';
                        }
                        document.body.appendChild(firework);
                    }

                    setTimeout(() => {
                        const message = document.getElementById('birthdayMessage');
                        if (message) {
                            message.classList.add('show');
                            createTextSparkles();
                        }
                    }, 1500);
                }

                function cutCake() {
                    let knife = document.createElement('div');
                    knife.className = 'knife';
                    document.body.appendChild(knife);

                    setTimeout(() => {
                        const layers = document.querySelectorAll('.layer');
                        layers.forEach((layer, index) => {
                            let layerRight = layer.cloneNode(true);
                            layerRight.classList.add('cut-right');
                            layerRight.classList.remove('cut');
                            layer.parentNode.appendChild(layerRight);
                            layer.classList.add('cut');

                            for (let i = 0; i < 10; i++) {
                                let sparkle = document.createElement('div');
                                sparkle.className = 'cut-sparkle';
                                sparkle.style.left = `calc(50% + ${(Math.random() * 100 - 50)}px)`;
                                sparkle.style.bottom = `calc(30px + ${index * 80 + Math.random() * 50}px)`;
                                sparkle.style.animationDelay = Math.random() * 0.5 + 's';
                                document.body.appendChild(sparkle);
                            }
                        });

                        const candles = document.querySelectorAll('.candle');
                        candles.forEach(candle => candle.style.opacity = '0');

                        setTimeout(() => {
                            const album = document.getElementById('album');
                            if (album) {
                                album.classList.add('show');
                                const photos = document.querySelectorAll('.album-photo');
                                if (photos[0]) photos[0].classList.add('active');
                            }
                        }, 1000);
                    }, 2500);
                }

                createBalloonCluster();
                createFireworks();
                setTimeout(cutCake, 6000);
            } catch (error) {
                console.error('Error in releaseBalloons:', error);
            }
        }

        let currentPhotoIndex = 0;
        const photos = document.querySelectorAll('.album-photo');
        const totalPhotos = photos.length;

        function changePhoto(direction) {
            try {
                photos[currentPhotoIndex].classList.remove('active');
                currentPhotoIndex = (currentPhotoIndex + direction + totalPhotos) % totalPhotos;
                photos[currentPhotoIndex].classList.add('active');
            } catch (error) {
                console.error('Error in changePhoto:', error);
            }
        }
    </script>
    <style>
        .balloon::before {
            height: var(--string-length, 120px);
        }
        
        @keyframes sway {
            0% {
                transform: rotate(calc(-1 * var(--sway-angle, 5deg)));
            }
            100% {
                transform: rotate(var(--sway-angle, 5deg));
            }
        }
        
        @keyframes swayString {
            0% {
                transform: translateX(-50%) skew(calc(-1 * var(--sway-angle, 5deg)));
            }
            100% {
                transform: translateX(-50%) skew(var(--sway-angle, 5deg));
            }
        }
    </style>
</body>

</html>